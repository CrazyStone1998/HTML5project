(function(e){function t(t){for(var n,r,l=t[0],s=t[1],c=t[2],d=0,p=[];d<l.length;d++)r=l[d],o[r]&&p.push(o[r][0]),o[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==o[s]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={4:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;i.push([33,0,1]),a()})({"+CZ1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticStyle:{margin:"auto"}},[a("h2",{staticStyle:{"font-weight":"initial"}},[e._v("管理者注册")]),a("register-form"),a("p",{staticStyle:{"text-align":"right"}},[a("a",{attrs:{href:e.BASE_URL+"user.html/#/register"}},[e._v("切换至用户端注册")])])],1)},o=[],i=a("NJ9t"),r={name:"Register",components:{RegisterForm:i["a"]},data:function(){return{BASE_URL:"/"}}},l=r,s=(a("k81u"),a("KHd+")),c=Object(s["a"])(l,n,o,!1,null,"19de6fb3",null);t["default"]=c.exports},"/56W":function(e,t,a){"use strict";a.r(t);a("yt8O"),a("VRzm");var n=a("Kw5r"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],r={methods:{}},l=r,s=(a("SoJG"),a("KHd+")),c=Object(s["a"])(l,o,i,!1,null,null,null),u=c.exports,d=a("jE9Z"),p=a("7Qib"),m=a("ssfR"),h=a("uXSg"),f=function(e){return h("./".concat(Object(p["d"])(e),"/").concat(Object(p["e"])(e),".vue")).default};n["default"].use(d["a"]);var g=new d["a"]({routes:[{path:"/",name:"home",component:f("home")},{path:"/group/:id",name:"group",component:f("group")}]});g.beforeEach(function(e,t,a){Object(m["a"])()?a():window.location.href="/index.html"});var b=a("XJYT"),_=a.n(b);a("EVdn"),a("3k1D"),a("D66Q"),a("y2Aq");n["default"].config.productionTip=!1,n["default"].use(_.a),new n["default"]({router:g,render:function(e){return e(u)}}).$mount("#app")},"/wHh":function(e,t,a){},33:function(e,t,a){e.exports=a("/56W")},"8Nya":function(e,t,a){},BVbb:function(e,t,a){"use strict";var n=a("hl8e"),o=a.n(n);o.a},CPFs:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"200px",width:"200px"},attrs:{id:"pie"}})},o=[],i=(a("yt8O"),a("VRzm"),a("EVdn"),{name:"pie_graph",props:["data_people"],mounted:function(){this.update()},watch:{data_people:function(e,t){this.update()}},methods:{update:function(){console.log("123");var e=this,t=[[0,e.data_people.come]],a=[[0,e.data_people.leavea]],n=[[0,e.data_people.notcome]];Flotr.draw(document.getElementById("pie"),[{data:t,label:"出勤"},{data:a,label:"请假"},{data:n,label:"缺勤"}],{HtmlText:!1,grid:{verticalLines:!1,horizontalLines:!1,outlineWidth:0},xaxis:{showLabels:!1},yaxis:{showLabels:!1},pie:{show:!0,explode:6},mouse:{track:!0},legend:{position:"se",backgroundColor:"#D2E8FF"}})}}}),r=i,l=(a("JQb0"),a("KHd+")),s=Object(l["a"])(r,n,o,!1,null,"d320675e",null);t["default"]=s.exports},DJkZ:function(e,t){这里放相应view的私有component},DMB7:function(e,t,a){"use strict";var n=a("/wHh"),o=a.n(n);o.a},JQb0:function(e,t,a){"use strict";var n=a("Q4JG"),o=a.n(n);o.a},JWkG:function(e,t,a){"use strict";var n=a("pBuk"),o=a.n(n);o.a},OSxE:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"},style:e.note,attrs:{id:"test"}},[a("div",{staticStyle:{height:"100%","background-color":"rgba(0,0,0,0.47)",color:"white"}},[a("div",{staticStyle:{width:"80%",margin:"0 auto","padding-top":"25%"}},[e._m(0),a("el-card",{staticStyle:{margin:"0 auto",color:"white"}},[a("login-form",{attrs:{type:"management"}}),a("p",{staticStyle:{float:"left"}},[a("a",{attrs:{href:e.BASE_URL+"index.html/#/login"}},[e._v("新用户注册")])]),a("p",{staticStyle:{float:"right"}},[a("a",{attrs:{href:e.BASE_URL+"user.html/#/login"}},[e._v("切换至用户端页面")])])],1)],1)])])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticStyle:{margin:"0","margin-bottom":"20%"}},[e._v("亲爱的管理者，"),a("br"),a("h1",{staticStyle:{margin:"0"}},[e._v("welcome!")])])}],i=a("YbHW"),r={name:"Login",components:{LoginForm:i["a"]},data:function(){return{note:{backgroundImage:"url("+a("4LYi")+")",backgroundRepeat:"no-repeat",height:"100%",backgroundSize:"100% 100%"},BASE_URL:"/"}}},l=r,s=(a("qZ/i"),a("DMB7"),a("KHd+")),c=Object(s["a"])(l,n,o,!1,null,"7a06371c",null);t["default"]=c.exports},Q4JG:function(e,t,a){},S4lt:function(e,t,a){},SoJG:function(e,t,a){"use strict";var n=a("8Nya"),o=a.n(n);o.a},"V/8x":function(e,t,a){"use strict";var n=a("S4lt"),o=a.n(n);o.a},"Xct/":function(e,t,a){"use strict";var n=a("Z0sJ"),o=a.n(n);o.a},YyrU:function(e,t,a){},Z0sJ:function(e,t,a){},cPXk:function(e,t,a){},drVG:function(e,t,a){},fPAr:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{style:"background-color: #909399"},[a("h4",[e._v(e._s(e.groupName))])])},o=[],i={name:"SingleGroupItem",props:{groupId:{type:String,required:!0},groupName:{type:String,required:!0}},data:function(){}},r=i,l=(a("vSbO"),a("KHd+")),s=Object(l["a"])(r,n,o,!1,null,"4bbc3dce",null);t["default"]=s.exports},hl8e:function(e,t,a){},k81u:function(e,t,a){"use strict";var n=a("drVG"),o=a.n(n);o.a},kERy:function(e,t,a){},l15i:function(e,t,a){"use strict";var n=a("YyrU"),o=a.n(n);o.a},lFeD:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"groupTable"}},[a("el-dialog",{attrs:{title:e.groupname,visible:e.QRcodeDialogVisible},on:{"update:visible":function(t){e.QRcodeDialogVisible=t}}},[a("p",{staticStyle:{"text-align":"center",margin:"0"}},[a("img",{staticStyle:{width:"250px",height:"250px"},attrs:{src:e.imgUrl}})])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.myGroupList,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"群口令"}}),a("el-table-column",{attrs:{prop:"name",label:"群体名称"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.showQR(t.$index)}}},[e._v("\n                            二维码\n                        ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.JumpToGroup(t.$index)}}},[e._v("\n                            进入群体\n                        ")])]}}])})],1)],1)},o=[],i=(a("f3/d"),a("J9k6")),r=a("0FX9"),l=a.n(r),s={name:"MyGroupTable",created:function(){this.update()},data:function(){return{baseurl:"https://www.wecheck.work/user.html#/group/",tableData:[],activeNames:["1"],myGroupList:[],dialogFormVisible:!1,formLabelWidth:"100px",imgUrl:null,groupname:null,QRcodeDialogVisible:!1}},methods:{update:function(){var e=this;Object(i["d"])().then(function(t){e.myGroupList=t})},handleChange:function(e){},JumpToGroup:function(e){var t=this.myGroupList[e].id;this.$router.push("group/"+t)},showQR:function(e){var t=this;this.QRcodeDialogVisible=!0;var a=this.myGroupList[e].id;this.groupname=this.myGroupList[e].name;var n=this.baseurl+a;l.a.toDataURL(n,{errorCorrectionLevel:"H"},function(e,a){t.imgUrl=a})}}},c=s,u=(a("Xct/"),a("KHd+")),d=Object(u["a"])(c,n,o,!1,null,null,null);t["default"]=d.exports},"nO/l":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.down}},[e._v("导出表格")])},o=[],i=(a("f3/d"),a("yt8O"),a("VRzm"),{name:"downExcel",props:["jsonData"],data:function(){return{}},methods:{down:function(){console.log("123");for(var e="用户名,姓名,缺勤,请假,出勤,出勤率\n",t=0;t<this.jsonData.length;t++)e=e+"".concat(this.jsonData[t]["username"]+"\t",",")+"".concat(this.jsonData[t]["name"]+"\t",",")+"".concat(this.jsonData[t]["missed"]+"\t",",")+"".concat(this.jsonData[t]["leave"]+"\t",",")+"".concat(this.jsonData[t]["done"]+"\t",",")+"".concat(this.jsonData[t]["done_percent"]+"\t",","),e+="\n";var a="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(e),n=document.createElement("a");n.href=a,n.download="考勤记录.csv",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}}),r=i,l=(a("ycMQ"),a("KHd+")),s=Object(l["a"])(r,n,o,!1,null,"2fb26c3a",null);t["default"]=s.exports},pBuk:function(e,t,a){},"qZ/i":function(e,t,a){"use strict";var n=a("kERy"),o=a.n(n);o.a},qlX1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("el-container",{attrs:{id:"GroupContainer"}},[a("el-header",{style:e.note},[a("AppBar",[[e._v(e._s(this.name))]],2)],1),a("el-main",[a("el-tabs",{on:{"tab-click":e.handleListClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"群体成员",name:"first"}},[a("p",{staticStyle:{color:"#606266",margin:"5px 0"}},[e._v("考勤次数:"+e._s(e.kaoqin_all)+" 平均出勤率："+e._s(e.avg_done_persent))]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.members,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"done_percent",label:"出勤率"}}),a("el-table-column",{attrs:{prop:"missed",label:"缺勤"}}),a("el-table-column",{attrs:{prop:"leave",label:"请假"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.stu_message(t.$index)}}},[e._v("查看\n                                ")])]}}])})],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("downExcel",{attrs:{"json-data":e.members}})],1),a("el-dialog",{staticClass:"recordDiv",staticStyle:{"margin-top":"0"},attrs:{id:"detailRecord",title:"详细签到情况",visible:e.perRecordDiv},on:{"update:visible":function(t){e.perRecordDiv=t}}},[a("el-table",{attrs:{data:e.perRecordData,height:350,"row-class-name":e.perRecordState}},[a("el-table-column",{attrs:{property:"day",label:"日期"}}),a("el-table-column",{attrs:{property:"time",label:"开始时间"}}),a("el-table-column",{attrs:{property:"checked",fixed:"right",width:"50",label:"情况"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"计划列表",name:"second"}},[a("el-table",{staticStyle:{width:"100%","margin-bottom":"40px"},attrs:{"row-class-name":e.tableRowClassName,data:e.mySchList,border:""}},[a("el-table-column",{attrs:{prop:"startUpTime",label:"起始时间"}}),a("el-table-column",{attrs:{prop:"duration",label:"持续时间"}}),a("el-table-column",{attrs:{prop:"repeat",label:"重复"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteScheduleClick(t.$index)}}},[e._v("删除\n                                ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.change_Schedule(t.$index)}}},[e._v("编辑\n                                ")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"历史签到",name:"third"}},[a("el-table",{staticStyle:{width:"100%","margin-bottom":"40px"},attrs:{data:e.historyScheduleList,border:""}},[a("el-table-column",{attrs:{prop:"day",label:"日期"}}),a("el-table-column",{attrs:{prop:"time",label:"时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.recordMess(t.$index)}}},[e._v("查看")])]}}])})],1),a("el-dialog",{staticClass:"recordDiv",attrs:{title:"详细签到情况",visible:e.RecordDiv},on:{"update:visible":function(t){e.RecordDiv=t}}},[a("el-collapse",{model:{value:e.Record_activeName,callback:function(t){e.Record_activeName=t},expression:"Record_activeName"}},[a("Pie_graph",{staticStyle:{margin:"0 auto"},attrs:{data_people:e.data_people}}),a("el-collapse-item",{attrs:{title:"出勤人员",name:"1"}},[a("el-table",{attrs:{data:e.RecordData.done,"row-class-name":e.recordBack_done}},[a("el-table-column",{attrs:{property:"username",label:"用户名"}}),a("el-table-column",{attrs:{property:"name",label:"姓名"}})],1)],1),a("el-collapse-item",{attrs:{title:"缺勤人员",name:"2"}},[a("el-table",{attrs:{data:e.RecordData.missed,"row-class-name":e.recordBack_missed}},[a("el-table-column",{attrs:{property:"username",label:"用户名"}}),a("el-table-column",{attrs:{property:"name",label:"姓名"}})],1)],1),a("el-collapse-item",{attrs:{title:"请假人员",name:"3"}},[a("el-table",{attrs:{data:e.RecordData.leave,"row-class-name":e.recordBack_leave}},[a("el-table-column",{attrs:{property:"username",label:"用户名"}}),a("el-table-column",{attrs:{property:"name",label:"姓名"}})],1)],1)],1)],1)],1)],1),a("el-dialog",{attrs:{title:"设置签到计划",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.schedule_form}},[a("el-form-item",{attrs:{label:"开启时间","label-width":e.formLabelWidth}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",format:"HH:mm","value-format":"HH:mm",placeholder:"选择时间"},model:{value:e.schedule_form.startUpTime,callback:function(t){e.$set(e.schedule_form,"startUpTime",t)},expression:"schedule_form.startUpTime"}})],1),a("el-form-item",{attrs:{label:"持续时间","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:8}},[a("el-input",{model:{value:e.schedule_form.duration,callback:function(t){e.$set(e.schedule_form,"duration",t)},expression:"schedule_form.duration"}})],1),a("el-col",{attrs:{span:2}},[e._v("\n                            分\n                        ")])],1),a("el-form-item",{attrs:{label:"重复","label-width":e.formLabelWidth}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.rep,callback:function(t){e.rep=t},expression:"rep"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),a("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.schedule_form.enable,callback:function(t){e.$set(e.schedule_form,"enable",t)},expression:"schedule_form.enable"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit_schedule}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改签到计划",visible:e.dialogChangeFormVisible},on:{"update:visible":function(t){e.dialogChangeFormVisible=t}}},[a("el-form",{attrs:{model:e.schedule_change_form}},[a("el-form-item",{attrs:{label:"开启时间","label-width":e.formLabelWidth}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",format:"HH:mm","value-format":"HH:mm",placeholder:"选择时间"},model:{value:e.schedule_change_form.startUpTime,callback:function(t){e.$set(e.schedule_change_form,"startUpTime",t)},expression:"schedule_change_form.startUpTime"}})],1),a("el-form-item",{attrs:{label:"持续时间","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:8}},[a("el-input",{model:{value:e.schedule_change_form.duration,callback:function(t){e.$set(e.schedule_change_form,"duration",t)},expression:"schedule_change_form.duration"}})],1),a("el-col",{attrs:{span:2}},[e._v("\n                            分\n                        ")])],1),a("el-form-item",{attrs:{label:"重复","label-width":e.formLabelWidth}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.change_arr_repeat,callback:function(t){e.change_arr_repeat=t},expression:"change_arr_repeat"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),a("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.schedule_change_form.enable,callback:function(t){e.$set(e.schedule_change_form,"enable",t)},expression:"schedule_change_form.enable"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogChangeFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit_Changeschedule}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑群体",visible:e.dialogEditGroup},on:{"update:visible":function(t){e.dialogEditGroup=t}}},[a("el-form",{ref:"group_Editform",attrs:{model:e.group_Editform,rules:{positionCorrect:[{required:!0,message:"请在图中标记中心点",trigger:"change"}]}}},[a("el-form-item",{attrs:{label:"群体名称","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.group_Editform.name,callback:function(t){e.$set(e.group_Editform,"name",t)},expression:"group_Editform.name"}})],1),a("el-form-item",{attrs:{label:"人脸识别","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.group_Editform.needFace,callback:function(t){e.$set(e.group_Editform,"needFace",t)},expression:"group_Editform.needFace"}})],1),a("el-form-item",{attrs:{label:"地理位置","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.group_Editform.needLocation,callback:function(t){e.$set(e.group_Editform,"needLocation",t)},expression:"group_Editform.needLocation"}})],1),a("SetPosition",{class:[this.group_Editform.needLocation?"Show":"NotShow"],attrs:{"lat-prop":e.son_prop.lat,"lng-prop":e.son_prop.lng},on:{listenToChildLocationEvent:e.changeLoca}}),a("el-form-item",{class:[this.group_Editform.needLocation?"Show":"NotShow"],attrs:{label:"有效距离","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.group_Editform.effectiveDistance,callback:function(t){e.$set(e.group_Editform,"effectiveDistance",t)},expression:"group_Editform.effectiveDistance"}})],1),e._v("\n                        米\n                    ")],1),a("el-form-item",{attrs:{prop:"positionCorrect"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{type:"danger"},on:{click:e.deleGroup_open}},[e._v("\n                        删除群体\n                    ")]),a("el-button",{on:{click:function(t){e.dialogEditGroup=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit_EditGroup}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"请假请求",visible:e.dialogLeaveList},on:{"update:visible":function(t){e.dialogLeaveList=t}}},[a("el-table",{attrs:{data:e.leave_list}},[a("el-table-column",{attrs:{property:"name",label:"姓名",width:"70"}}),a("el-table-column",{attrs:{property:"result",label:"原因",width:"100"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.submit_leaveAnswer(t.$index,!1)}}},[e._v("拒绝")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.submit_leaveAnswer(t.$index,!0)}}},[e._v("同意")])]}}])})],1)],1)],1)],1),a("div",{staticClass:"footer"},[a("el-button-group",[a("el-button",{attrs:{type:e.state?"danger":"primary"},on:{click:e.imme_sign}},[e._v("\n                "+e._s(e.state?"结束签到":"开始签到")+"\n            ")]),a("el-button",{on:{click:e.plan_sign}},[e._v("添加计划")]),a("el-button",{on:{click:e.editGroup}},[e._v("编辑群体")])],1)],1)],1)},o=[],i=(a("KKXr"),a("FLlr"),a("f3/d"),a("yt8O"),a("VRzm"),a("3TiO")),r=a("J9k6"),l=a("zbG2"),s=(a("91GP"),a("dRp0")),c=a("Qyje"),u=a.n(c);function d(e){return s["b"].get("schedule",{params:{id:e}}).then(s["a"])}function p(e,t){return s["b"].post("schedule/add",u.a.stringify(Object.assign({id:e},t))).then(s["a"])}function m(e,t){return s["b"].post("schedule/update",u.a.stringify(Object.assign({scheduleId:e},t))).then(s["a"])}function h(e){return s["b"].post("schedule/delete",u.a.stringify({scheduleId:e})).then(s["a"])}var f=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticStyle:{height:"250px"},attrs:{id:"container"}})])}],b={name:"SetPosition",props:["lngProp","latProp"],data:function(){return{jing:null,wei:null,intervalindex:null,marker:null,map:null,counter:0,change_jw_counter:0,lngCenter:null,latCenter:null,zoom:null}},created:function(){null==this.latProp||null==this.lngProp?(this.lngCenter=117.138302,this.latCenter=36.666758,this.zoom=15):(this.lngCenter=this.lngProp,this.latCenter=this.latProp,this.zoom=15)},mounted:function(){this.update()},watch:{},methods:{update:function(){var e,t=this;t.marker,t.map=new AMap.Map("container",{resizeEnable:!0,center:[t.lngCenter,t.latCenter],zoom:t.zoom});t.map.on("click",function(e){t.jing=e.lnglat.getLng(),t.wei=e.lnglat.getLat(),t.clearmarker(),t.addMarker(),t.sendLocationParent()});t.map.plugin("AMap.Geolocation",function(){e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB",GeoLocationFirst:!0}),t.map.addControl(e),null==t.lngProp&&null==t.latProp?e.getCurrentPosition():void 0==t.lngProp&&void 0==t.latProp?console.log("没收到prop"):(t.jing=t.lngProp,t.wei=t.latProp,t.clearmarker(),t.addMarker(),t.sendLocationParent()),console.log("已经开始加载地图了"),AMap.event.addListener(e,"complete",t.onComplete),AMap.event.addListener(e,"error",t.onError)})},onComplete:function(e){var t=["定位成功"];t.push("经度："+e.position.getLng()),t.push("纬度："+e.position.getLat()),this.jing=e.position.getLng(),this.wei=e.position.getLat(),this.clearmarker(),this.addMarker(),this.sendLocationParent(),e.accuracy&&t.push("精度："+e.accuracy+" 米"),t.push("是否经过偏移："+(e.isConverted?"是":"否"))},onError:function(e){console.log(JSON.stringify(e))},addMarker:function(){this.marker=new AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:[this.jing,this.wei]}),this.marker.setMap(this.map)},clearmarker:function(){this.marker&&(this.marker.setMap(null),this.marker=null)},sendLocationParent:function(){this.$emit("listenToChildLocationEvent",this.jing,this.wei)}}},_=b,v=(a("BVbb"),a("KHd+")),y=Object(v["a"])(_,f,g,!1,null,"373f3e1f",null),w=y.exports,k=a("VOVZ"),x=a("cRnl"),S=a("CPFs"),L=a("nO/l"),E={name:"Group",components:{downExcel:L["default"],Pie_graph:S["default"],AppBar:i["a"],SetPosition:w},data:function(){return{name:"",owner:"",state:!1,members:[],id:null,dialogFormVisible:!1,formLabelWidth:"100px",dialogChangeFormVisible:!1,dialogEditGroup:!1,options:[{value:"1",label:"周一"},{value:"2",label:"周二"},{value:"3",label:"周三"},{value:"4",label:"周四"},{value:"5",label:"周五"},{value:"6",label:"周六"},{value:"7",label:"周日"}],rep:[],schedule_form:{startUpTime:"",duration:"",repeat:"",enable:!0},schedule_change_form:{startUpTime:"",duration:null,repeat:"",enable:!0},schedule_final:{startUpTime:"",duration:null,repeat:"",enable:!1},changeSchedule_final:{startUpTime:"",duration:null,repeat:"",enable:!1},activeName:"second",Record_activeName:1,mySchList:[],intervalindex:null,group_Editform:{name:"操作系统",needLocation:!1,needFace:!1,lng:null,lat:null,effectiveDistance:500},stateOfList:!1,change_arr_repeat:[],son_prop:{lat:null,lng:null},perRecordDiv:!1,perRecordData:[],historyScheduleList:[],RecordDiv:!1,RecordData:{id:null,startUpDateTime:null,duration:null,done:[],missed:[],leave:[]},note:{backgroundImage:"url("+a("mWCa")+")",backgroundRepeat:"no-repeat",height:"60px",width:"100%",backgroundSize:"100% 100%",position:"relative"},kaoqin_all:0,data_people:{come:0,notcome:5,leavea:0},avg_done_persent:"",group_mes_index:0,leave_list:[],request_list:[],dialogLeaveList:!1,pie_show:!0,downloadData:[],notifynote:{}}},created:function(){this.id=this.$route.params.id,console.log(this.id),this.update(),1==this.state&&this.ReturnTheLeaveMessage()},beforeDestroy:function(){console.log("我要关闭了"),clearInterval(this.group_mes_index)},watch:{$route:function(e,t){this.id=this.$route.params.id,this.update()},"group_Editform.lng":{immediate:!0,handler:function(e){var t=this.group_Editform;this.group_Editform.positionCorrect=!t.needLocation||e?"true":""}},"group_Editform.needLocation":{immediate:!0,handler:function(e){this.group_Editform.positionCorrect=!e||this.group_Editform.lng?"true":""}},state:function(e,t){1==e&&0==t?(console.log("开启轮询了"),this.ReturnTheLeaveMessage()):0==e&&1==t&&(clearInterval(this.group_mes_index),console.log("关闭轮询了"),this.group_mes_index=0,this.notifynote.close())}},methods:{update:function(){var e=this;Object(r["c"])(this.id).then(function(t){if(t){e.name=t.name,e.owner=t.owner,e.state=t.state;Object(k["b"])(e.id).then(function(t){for(var a=t,n=0;n<a.length;n++)a[n].day=a[n].startUpDateTime.slice(0,10),a[n].time=a[n].startUpDateTime.slice(11,16),1==a[n].checked?a[n].checked="签到":a[n].checked="已签";e.historyScheduleList=a,e.kaoqin_all=a.length}),Object(k["a"])(e.id).then(function(t){e.members=t;var a=e,n=0;for(var o in a.members){var i=parseFloat(a.members[o]["done_percent"]);n+=i}n/=a.members.length,e.avg_done_persent=n.toFixed(2)+"%"}),e.group_Editform.name=t.name,e.group_Editform.needLocation=t.needLocation,e.group_Editform.needFace=t.needFace,t.needLocation?(e.group_Editform.lng=t.location.lng,e.group_Editform.lat=t.location.lat,e.son_prop.lng=t.location.lng,e.son_prop.lat=t.location.lat,e.group_Editform.effectiveDistance=t.location.effectiveDistance):(e.son_prop.lng=null,e.son_prop.lat=null,e.group_Editform.effectiveDistance=500),console.log("正在更新群组信息"+e.state),d(e.id).then(function(t){console.log("成功获取"),e.mySchList=t})}else e.$alert("该群组不存在！","服务器消息",{confirmButtonText:"确定"}).then(function(){e.$router.go(-1)})})},plan_sign:function(){this.dialogFormVisible=!0},imme_sign:function(){var e=this;!0===this.state?Object(l["b"])(this.id).then(function(){e.$message({message:"已关闭签到",center:!0,type:"warning"}),e.update()}):Object(l["c"])(this.id).then(function(){e.$message({message:"开启签到成功",type:"success",center:!0}),e.update()})},deleGroup_open:function(){var e=this;this.$confirm("此操作将永久删除"+this.name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("删除"),Object(r["b"])(e.id).then(function(){e.$message({message:"删除成功，正在跳转到主页面",type:"success",center:!0}),setTimeout(function(){e.$router.go(-1)},2e3)},function(){console.log(e.id)})}).catch(function(){e.$message({type:"info",message:"已取消删除",center:!0})})},submit_schedule:function(){var e=this;if(this.schedule_final.duration=this.schedule_form.duration,console.log("持续时间为"+this.schedule_final.duration),this.schedule_final.enable=this.schedule_form.enable,this.schedule_final.repeat="",0!=this.rep.length){this.schedule_final.repeat=this.rep[0];for(var t=1;t<this.rep.length;t++)this.schedule_final.repeat=this.schedule_final.repeat+","+this.rep[t]}this.schedule_final.startUpTime=this.schedule_form.startUpTime,p(this.id,this.schedule_final).then(function(){e.$message({message:"创建计划成功",type:"success",center:!0})}),this.dialogFormVisible=!1,this.update()},change_Schedule:function(e){this.dialogChangeFormVisible=!0,this.schedule_change_form=this.mySchList[e];var t=this.schedule_change_form.repeat;this.change_arr_repeat=t.split(",")},submit_Changeschedule:function(){var e=this,t=this.schedule_change_form.scheduleId;if(this.changeSchedule_final.startUpTime=this.schedule_change_form.startUpTime,this.changeSchedule_final.duration=this.schedule_change_form.duration,this.changeSchedule_final.enable=this.schedule_change_form.enable,this.changeSchedule_final.repeat="",0!=this.change_arr_repeat.length){this.changeSchedule_final.repeat=this.change_arr_repeat[0];for(var a=1;a<this.change_arr_repeat.length;a++)this.changeSchedule_final.repeat=this.changeSchedule_final.repeat+","+this.change_arr_repeat[a]}m(t,this.changeSchedule_final).then(function(){e.$message({message:"修改成功",type:"success",center:!0}),e.update(),e.dialogChangeFormVisible=!1})},handleListClick:function(e,t){},deleteScheduleClick:function(e){var t=this;this.$confirm("此操作将永久删除该计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){h(t.mySchList[e].scheduleId).then(function(){t.$message({type:"success",message:"成功删除计划",center:!0}),t.update()})}).catch(function(){t.$message({type:"info",message:"已取消删除",center:!0})})},editGroup:function(){this.dialogEditGroup=!0},submit_EditGroup:function(){var e=this;this.$refs.group_Editform.validate().then(function(){return Object(r["g"])(e.id,e.group_Editform)}).then(function(){e.$message({message:"成功修改",type:"success",center:!0}),e.dialogEditGroup=!1,e.update()})},tableRowClassName:function(e){e.row;var t=e.rowIndex;return!1===this.mySchList[t].enable?"warning_row":(this.mySchList[t].enable,"success_row")},recordBack_done:function(e){e.row,e.rowIndex;return"success_row"},recordBack_missed:function(e){e.row,e.rowIndex;return"warning_row"},recordBack_leave:function(e){e.row,e.rowIndex;return"warning_row"},perRecordState:function(e){e.row;var t=e.rowIndex;return"未签"===this.perRecordData[t].checked?"warning_row":"已签"===this.perRecordData[t].checked?"success_row":void 0},changeLoca:function(e,t){this.group_Editform.lng=e,this.group_Editform.lat=t,console.log("来自父组件打印"+this.group_Editform.lng+","+this.group_Editform.lat)},stu_message:function(e){var t=this;this.perRecordDiv=!0;var a=this.members[e].username;Object(k["d"])(this.id,a).then(function(e){for(var a=e,n=0;n<a.length;n++)a[n].day=a[n].startUpDateTime.slice(0,10),a[n].time=a[n].startUpDateTime.slice(11,16),1==a[n].checked?a[n].checked="已签":0==a[n].checked&&1==a[n].leave?a[n].checked="请假":a[n].checked="未签";t.perRecordData=a})},ReturnTheLeaveMessage:function(){var e=this;console.log("开始轮询了"+e.id),this.group_mes_index=setInterval(function(){Object(x["b"])(e.id).then(function(t){if(t.leaves.length>0){e.open12(),e.leave_list=t.leaves;for(var a=[],n=0;n<e.leave_list.length;n++)a[n]={},a[n]["leave_id"]=e.leave_list[n]["leave_id"],a[n]["leave_response"]=!1;e.request_list=a}})},1e3)},recordMess:function(e){var t=this;this.RecordDiv=!0,console.log(e);var a=this.historyScheduleList[e].id;console.log(a),Object(k["c"])(a).then(function(e){t.RecordData.done=e.done,t.RecordData.missed=e.missed,t.RecordData.leave=e.leave;var a={};a.come=t.RecordData.done.length,a.notcome=t.RecordData.missed.length,a.leavea=t.RecordData.leave.length,t.data_people=a})},open12:function(){var e=this;clearInterval(this.group_mes_index),this.notifynote=this.$notify({title:"通知",dangerouslyUseHTMLString:!0,duration:0,showClose:!1,message:"<strong>学生请假</strong>",onClick:function(){e.dialogLeaveList=!0,this.close()}})},submit_leaveAnswer:function(e,t){console.log(t);var a={};a.leave_id=this.leave_list[e].leave_id,a.leave_response=t,a.leave_msg=t,this.leave_list.splice(e,1),Object(x["d"])(a)}}},D=E,R=(a("V/8x"),a("JWkG"),Object(v["a"])(D,n,o,!1,null,"46c7b17c",null));t["default"]=R.exports},"sZ/I":function(e,t,a){},tPLj:function(e,t,a){"use strict";var n=a("cPXk"),o=a.n(n);o.a},uXSg:function(e,t,a){var n={"./group/Group":"qlX1","./group/Group.vue":"qlX1","./group/components/downExcel":"nO/l","./group/components/downExcel.vue":"nO/l","./group/components/pie_graph":"CPFs","./group/components/pie_graph.vue":"CPFs","./home/Home":"wgb7","./home/Home.vue":"wgb7","./home/component/MyGroupTable":"lFeD","./home/component/MyGroupTable.vue":"lFeD","./home/component/SingleGroupItem":"fPAr","./home/component/SingleGroupItem.vue":"fPAr","./login/Login":"OSxE","./login/Login.vue":"OSxE","./login/components/README.md":"DJkZ","./register/Register":"+CZ1","./register/Register.vue":"+CZ1"};function o(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id="uXSg"},vSbO:function(e,t,a){"use strict";var n=a("sZ/I"),o=a.n(n);o.a},viH7:function(e,t,a){},wgb7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("my-header"),a("MyGroupTable",{ref:"table",staticStyle:{"margin-bottom":"50px"}}),a("div",{staticClass:"footer"},[a("el-button",{on:{click:e.ChuangJianGroup}},[a("span",{staticClass:"letter_footer"},[e._v("创")]),a("span",{staticClass:"letter_footer"},[e._v("建")]),a("span",{staticClass:"letter_footer"},[e._v("群")]),a("span",{staticClass:"letter_footer"},[e._v("体")])])],1)],1)},o=[],i=a("lFeD"),r=a("mDl2"),l=a("J9k6"),s=(a("ssfR"),a("tvBP"),{name:"home",components:{MyHeader:r["a"],MyGroupTable:i["default"]},computed:{},data:function(){return{BASE_URL:"/",headPhoto:null}},methods:{update:function(){this.$refs.table.update()},ChuangJianGroup:function(){var e=this;this.$prompt("请输入群体名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;console.log(a),Object(l["a"])(a).then(function(){console.log(a),e.$message({type:"success",message:"成功创建群体：: "+a}),e.update()})}).catch(function(){e.$message({type:"info",message:"取消输入"})})}}}),c=s,u=(a("l15i"),a("tPLj"),a("KHd+")),d=Object(u["a"])(c,n,o,!1,null,"171bdb0a",null);t["default"]=d.exports},y2Aq:function(e,t,a){},ycMQ:function(e,t,a){"use strict";var n=a("viH7"),o=a.n(n);o.a}});
//# sourceMappingURL=management.57baa5fb.js.map