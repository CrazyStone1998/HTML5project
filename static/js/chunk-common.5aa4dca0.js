(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"3TiO":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticClass:"app-bar",attrs:{type:"flex",align:"middle"}},[r("el-col",{attrs:{span:6}},[r("el-button",{staticStyle:{"vertical-align":"middle",width:"3em"},attrs:{type:"text"},on:{click:e.back}},[r("icon",{attrs:{src:e.backIcon}})],1)],1),r("el-col",{staticClass:"title",attrs:{span:12}},[r("h1",[e._t("default")],2)]),r("el-col",{staticClass:"right",staticStyle:{"text-align":"right"},attrs:{span:6}},[e._t("right")],2)],1)},o=[],i=(r("yt8O"),r("VRzm"),r("za7x")),a=r("Ba7Q"),s=r.n(a),u={name:"AppBar",components:{Icon:i["a"]},data:function(){return{backIcon:s.a}},methods:{back:function(){this.$router.go(-1)}}},c=u,l=(r("zoOJ"),r("KHd+")),d=Object(l["a"])(c,n,o,!1,null,"2bd48b14",null);t["a"]=d.exports},"4LYi":function(e,t,r){e.exports=r.p+"img/login_back.518a2d54.png"},"7Qib":function(e,t,r){"use strict";r.d(t,"d",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"e",function(){return a}),r.d(t,"b",function(){return s}),r.d(t,"a",function(){return u});r("ls82");var n=r("MECJ"),o=(r("Oyvg"),r("pIFo"),r("yt8O"),r("VRzm"),function(e){return e.slice(0,1).toUpperCase().concat(e.slice(1))}),i=function(e){return e.slice(0,1).toLowerCase().concat(e.slice(1))};function a(e){return new Promise(function(t){setTimeout(function(){t()},e)})}function s(){return new Promise(function(e,t){AMap.plugin("AMap.Geolocation",function(){var r=new AMap.Geolocation({enableHighAccuracy:!0,GeoLocationFirst:!0});r.getCurrentPosition();var n=new Date,o=null;function i(t){(!o||t.accuracy<o.accuracy)&&(o=t),Date.now()-n<7e3?r.getCurrentPosition():e({lng:o.position.lng,lat:o.position.lat})}function a(e){console.log("定位失败  ".concat(Date.now()," ").concat(e)),t(e)}AMap.event.addListener(r,"complete",i),AMap.event.addListener(r,"error",a)})})}function u(e){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=document.createElement("canvas"),r.width=t.videoWidth,r.height=t.videoHeight,r.getContext("2d").drawImage(t,0,0,r.width,r.height),e.next=6,new Promise(function(e){return r.toBlob(function(t){e(t)},"image/jpeg")});case 6:return n=e.sent,e.abrupt("return",new File([n],"video_capture_".concat(Date.now()),{lastModified:Date.now()}));case 8:case"end":return e.stop()}},e,this)})),c.apply(this,arguments)}},Ba7Q:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAA3klEQVRIia3WOwrDMAyA4T/tIbMFupVeIJm7tL1A6QkCPlFOE9pJkAZbkWRrtODDYOvRLctCZUzAA3illKauEhRM4nVqiAGMUTCHAcwRsIgBgxdUsZTS6gEPMQAraMKsoBmzgCoGrPuEBroxDQxhJTCM5cAqbA9WY1uwCSZgM0zAHLYCFy8m4CdzfgbuXkzAWwEdgWcE/LZE5ZWbodt/2ATdV0o1mqvlKrTUbcKo1g9D6FHHdqOWmaKifd//odapZ0Y9c9mERravDngD10wutH2pN41uXyU0tH2V0BkYfihlchvr/DBGAAAAAElFTkSuQmCC"},Eoag:function(e,t,r){},G5V7:function(e,t,r){},HWu3:function(e,t,r){"use strict";var n=r("Eoag"),o=r.n(n);o.a},J9k6:function(e,t,r){"use strict";r.d(t,"c",function(){return a}),r.d(t,"d",function(){return s}),r.d(t,"a",function(){return u}),r.d(t,"e",function(){return c}),r.d(t,"f",function(){return l}),r.d(t,"g",function(){return d}),r.d(t,"b",function(){return f});r("91GP");var n=r("dRp0"),o=r("Qyje"),i=r.n(o);function a(e){return n["b"].get("group",{params:{id:e}}).then(n["a"])}function s(){return n["b"].get("group/list").then(n["a"])}function u(e){return n["b"].post("group/add",i.a.stringify({name:e})).then(n["a"])}function c(e){return n["b"].post("group/join",i.a.stringify({id:e})).then(n["a"])}function l(e){return n["b"].post("group/quit",i.a.stringify({id:e})).then(n["a"])}function d(e,t){return n["b"].post("group/update",i.a.stringify(Object.assign({id:e},t))).then(n["a"])}function f(e){return n["b"].post("group/delete",i.a.stringify({id:e})).then(n["a"])}},NJ9t:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{attrs:{id:"RfContainer"}},[r("el-form",{ref:"ruleForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{"status-icon":"",model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkpassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.checkpassword,callback:function(t){e.$set(e.ruleForm,"checkpassword",t)},expression:"ruleForm.checkpassword"}})],1),r("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[r("br"),r("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:e.ruleForm.userType,callback:function(t){e.$set(e.ruleForm,"userType",t)},expression:"ruleForm.userType"}},[r("el-option",{attrs:{label:"签到端用户",value:0}}),r("el-option",{attrs:{label:"管理端用户",value:1}})],1)],1),r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"本人照片",prop:"profile"}},[r("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","on-change":e.getFile,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-exceed":e.handleExceed,limit:1,"auto-upload":!1}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),r("em",[e._v("点击上传")])])])],1),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("注册")])],1)],1)],1)},o=[],i=(r("f3/d"),r("RW0V"),r("rGqo"),r("ssfR")),a=(r("7Qib"),{name:"RegisterForm",created:function(){/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?this.pcOrPhone=!1:this.pcOrPhone=!0},mounted:function(){},data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("账号不能为空"));setTimeout(function(){r()},100)},r=function(t,r,n){""===r?n(new Error("请输入密码")):(""!==e.ruleForm.checkpassword&&e.$refs.ruleForm.validateField("checkpassword"),n())},n=function(t,r,n){""===r?n(new Error("请再次输入密码")):r!==e.ruleForm.password?n(new Error("两次输入密码不一致!")):n()},o=function(e,t,r){if(!t)return r(new Error("请上传正脸照片"));setTimeout(function(){r()},100)},i=function(e,t,r){if(!t)return r(new Error("请拍照"));setTimeout(function(){r()},100)};return{ruleForm:{username:"",password:"",checkpassword:"",name:"",userType:null,profile:!1,pcOrPhone:!0,photo_PC:null},rules:{username:[{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}],checkpassword:[{required:!0,validator:n,trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],userType:[{required:!0,message:"请选择用户类型",trigger:"blur"}],profile:[{required:!0,validator:o,trigger:"blur"}],photo_PC:[{required:!0,validator:i,trigger:"blur"}]}}},computed:{ruleFormData:function(){var e=this,t=new FormData;return console.log(this.ruleForm),Object.keys(this.ruleForm).forEach(function(r){"checkpassword"!==r&&t.append(r,e.ruleForm[r])}),console.log(t),t}},methods:{getFile:function(e,t){console.log(e),this.ruleForm.profile=e.raw},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Object(i["d"])(t.ruleFormData).then(function(){t.$message({message:"注册成功  正在跳转",type:"success"}),setTimeout(function(){t.$router.push("/login")},2e3)},function(e){t.$message.error("出错：".concat(e.message))})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){console.log(e,t),this.fileList=[]},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))}}}),s=a,u=(r("nrZA"),r("HWu3"),r("KHd+")),c=Object(u["a"])(s,n,o,!1,null,"3e884e7b",null);t["a"]=c.exports},PkUX:function(e,t,r){},Pp3p:function(e,t,r){},RPjt:function(e,t,r){"use strict";var n=r("G5V7"),o=r.n(n);o.a},YbHW:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"账号",prop:"username"}},[r("el-input",{attrs:{type:"text"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:e.submitting},on:{click:e.submit}},[r("i",{class:[e.submitting?"el-icon-loading":""]}),e._v(e._s(e.submitting?"":"登录")+"\n        ")])],1)],1)},o=[],i=(r("ls82"),r("MECJ")),a=r("ssfR"),s=r("7Qib"),u={name:"LoginForm",props:{redirect:{type:String}},data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]},submitting:!1}},methods:{submit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.submitting=!0,e.prev=1,e.next=4,Object(a["b"])(this.form.username,this.form.password);case 4:return t=e.sent,this.$message({message:"登陆成功  正在跳转",type:"success"}),e.next=8,Object(s["e"])(2e3);case 8:this.redirect?window.location.href=this.redirect:(r=0===t.userType?"user":"management",window.location.href="/".concat(r,".html")),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.$message.error("出错：".concat(e.t0.message));case 14:return e.prev=14,this.submitting=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])}));return function(){return e.apply(this,arguments)}}()}},c=u,l=(r("xhDR"),r("KHd+")),d=Object(l["a"])(c,n,o,!1,null,"ff32427c",null);t["a"]=d.exports},dRp0:function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"a",function(){return m});var n=r("xmWZ"),o=r("3Aqn"),i=r("0yhX"),a=r("EdlT"),s=r("4A8Y"),u=(r("yt8O"),r("VRzm"),r("vDqi")),c=r.n(u),l="/api/v1",d=c.a.create({baseURL:l});d.interceptors.request.use(function(e){return e.params=e.params||{},e.params.t=Date.now(),e});var f=function(e){function t(e,r){var o;return Object(n["a"])(this,t),o=Object(i["a"])(this,Object(a["a"])(t).call(this)),o.message=e,o.status=r,o}return Object(o["a"])(t,e),t}(Object(s["a"])(Error)),m=function(e){var t=e.data;if(200===t.status)return t.data;throw new f(e.data.message,e.data.status)}},mDl2:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{style:e.note,attrs:{id:"headOut"}},[r("div",{staticStyle:{height:"45px",width:"45px","background-color":"#00ffff00",display:"inline-block",position:"absolute",top:"50%",transform:"translate(0, -50%)","border-radius":"25px","margin-left":"5%"},attrs:{id:"headphoto"},on:{click:function(t){e.showEditPerInfo()}}}),r("div",{staticStyle:{right:"0",height:"60%",position:"absolute",top:"50%",transform:"translate(0, -50%)","margin-right":"5%"},attrs:{id:"headIn"}},[r("el-button",{staticStyle:{color:"white"},attrs:{type:"text"},on:{click:e.logoutFunction}},[e._v("注销账户")])],1)]),r("el-dialog",{attrs:{title:"个人信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"UserInfo",attrs:{model:e.UserInfo}},[r("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[r("el-input",{attrs:{disabled:!0},model:{value:e.UserInfo.username,callback:function(t){e.$set(e.UserInfo,"username",t)},expression:"UserInfo.username"}})],1),r("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[r("el-input",{model:{value:e.UserInfo.name,callback:function(t){e.$set(e.UserInfo,"name",t)},expression:"UserInfo.name"}})],1),r("el-form-item",{attrs:{label:"人脸识别头像","label-width":e.formLabelWidth}},[r("div",{staticStyle:{width:"120px",height:"120px"},attrs:{id:"perEditHead"}}),r("el-upload",{ref:"profile",staticClass:"upload-demo",attrs:{prop:"profile",action:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-change":e.getFile,multiple:"",limit:1,"on-exceed":e.handleExceed,"auto-upload":!1}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("更换头像")])],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editPerInfo()}}},[e._v("确 定")])],1)],1)],1)},o=[],i=(r("RW0V"),r("rGqo"),r("f3/d"),r("ssfR")),a=r("tvBP"),s={name:"MyHeader",created:function(){this.getPhoto()},data:function(){return{BASE_URL:"/",note:{backgroundImage:"url("+r("mWCa")+")",backgroundRepeat:"no-repeat",height:"60px",width:"100%",backgroundSize:"100% 100%",position:"relative"},UserInfo:{username:"",name:"",profile:null},userHeadPhoto:null,submitUserInfo:{name:""},dialogFormVisible:!1,formLabelWidth:"100px"}},computed:{editPerInfoFormData:function(){var e=this;this.submitUserInfo.name=this.UserInfo.name,null!=this.userHeadPhoto&&(this.submitUserInfo.profile=this.userHeadPhoto);var t=new FormData;return console.log(this.submitUserInfo),Object.keys(this.submitUserInfo).forEach(function(r){t.append(r,e.submitUserInfo[r])}),t}},methods:{getFile:function(e,t){this.userHeadPhoto=e.raw},handleRemove:function(e,t){console.log(e,t),this.fileList=[]},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},logoutFunction:function(){var e=this;Object(i["c"])().then(function(){e.$message({message:"账户注销成功  正在跳转",type:"success"}),setTimeout(function(){window.location.href=e.BASE_URL},2e3)})},getPhoto:function(){var e=this;Object(a["a"])().then(function(t){document.getElementById("headphoto").style.backgroundImage="url("+t.profile+"?t="+Date.now()+")",document.getElementById("headphoto").style.backgroundSize="45px 45px",e.UserInfo=t})},editPerInfo:function(){var e=this;Object(a["b"])(this.editPerInfoFormData).then(function(){e.dialogFormVisible=!1,e.$message("修改成功"),setTimeout(e.getPhoto(),1e3),e.$refs.profile.clearFiles(),e.userHeadPhoto=null})},showEditPerInfo:function(){this.dialogFormVisible=!0,Object(a["a"])().then(function(e){document.getElementById("perEditHead").style.backgroundImage="url("+e.profile+"?t="+Date.now()+")",document.getElementById("perEditHead").style.backgroundSize="120px 120px"})}}},u=s,c=(r("n5iy"),r("KHd+")),l=Object(c["a"])(u,n,o,!1,null,"777928ca",null);t["a"]=l.exports},mWCa:function(e,t,r){e.exports=r.p+"img/head3.d6783fb6.png"},n5iy:function(e,t,r){"use strict";var n=r("PkUX"),o=r.n(n);o.a},nrZA:function(e,t,r){"use strict";var n=r("Pp3p"),o=r.n(n);o.a},ssfR:function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return c}),r.d(t,"a",function(){return l});var n=r("dRp0"),o=r("Qyje"),i=r.n(o),a="hasLoggedIn";function s(e,t){var r=n["b"].post("login",i.a.stringify({username:e,password:t})).then(n["a"]);return r.then(function(){return sessionStorage.setItem(a,"true")}),r}function u(){return n["b"].post("logout").then(n["a"]).then(function(e){return sessionStorage.removeItem(a)})}function c(e){return n["b"].post("register",e).then(n["a"])}function l(){return"true"===sessionStorage.getItem(a)}n["b"].get("hasLoggedIn").then(n["a"]).then(function(e){return sessionStorage.setItem(a,e?"true":"false")})},tvBP:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var n=r("dRp0");function o(e){return n["b"].get("user",{params:{id:e}}).then(n["a"])}function i(e){return n["b"].post("user",e).then(n["a"])}},umM6:function(e,t,r){},xhDR:function(e,t,r){"use strict";var n=r("zVlS"),o=r.n(n);o.a},zVlS:function(e,t,r){},za7x:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("img",{attrs:{src:e.src}})},o=[],i={name:"Icon",props:{src:{type:String,required:!0}}},a=i,s=(r("RPjt"),r("KHd+")),u=Object(s["a"])(a,n,o,!1,null,"72f3cb9a",null);t["a"]=u.exports},zbG2:function(e,t,r){"use strict";r.d(t,"d",function(){return a}),r.d(t,"a",function(){return s}),r.d(t,"c",function(){return u}),r.d(t,"b",function(){return c});var n=r("dRp0"),o=r("Qyje"),i=r.n(o);function a(){return n["b"].get("check/status").then(n["a"])}function s(e,t){return t.append("id",e),n["b"].post("check/check",t).then(n["a"])}function u(e){return n["b"].post("check/enable",i.a.stringify({id:e})).then(n["a"])}function c(e){return n["b"].post("check/disable",i.a.stringify({id:e})).then(n["a"])}},zoOJ:function(e,t,r){"use strict";var n=r("umM6"),o=r.n(n);o.a}}]);
//# sourceMappingURL=chunk-common.5aa4dca0.js.map