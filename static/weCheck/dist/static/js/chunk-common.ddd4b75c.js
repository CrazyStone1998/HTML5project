(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"3TiO":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticClass:"app-bar",attrs:{type:"flex",align:"middle"}},[r("el-col",{attrs:{span:4}},[r("el-button",{staticStyle:{"vertical-align":"middle",width:"3em"},attrs:{type:"text"},on:{click:e.back}},[r("icon",{attrs:{src:e.backIcon}})],1)],1),r("el-col",{staticClass:"title",attrs:{span:16}},[r("h1",[e._t("default")],2)]),r("el-col",{staticClass:"right",staticStyle:{"text-align":"right"},attrs:{span:4}},[e._t("right")],2)],1)},o=[],a=r("za7x"),i=r("Ba7Q"),s=r.n(i),u={name:"AppBar",components:{Icon:a["a"]},data:function(){return{backIcon:s.a}},methods:{back:function(){this.$router.go(-1)}}},c=u,l=(r("WL6l"),r("KHd+")),f=Object(l["a"])(c,n,o,!1,null,"1f5d687b",null);t["a"]=f.exports},"4LYi":function(e,t,r){e.exports=r.p+"img/login_back.518a2d54.png"},"7Qib":function(e,t,r){"use strict";r.d(t,"d",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"e",function(){return a}),r.d(t,"b",function(){return i}),r.d(t,"a",function(){return s});r("Oyvg"),r("pIFo");var n=function(e){return e.slice(0,1).toUpperCase().concat(e.slice(1))},o=function(e){return e.slice(0,1).toLowerCase().concat(e.slice(1))};function a(e){return new Promise(function(t){setTimeout(function(){t()},e)})}function i(){return new Promise(function(e,t){AMap.plugin("AMap.Geolocation",function(){var r=new AMap.Geolocation({enableHighAccuracy:!0,GeoLocationFirst:!0});r.getCurrentPosition();var n=new Date,o=null;function a(t){(!o||t.accuracy<o.accuracy)&&(o=t),Date.now()-n<7e3?r.getCurrentPosition():e({lng:o.position.lng,lat:o.position.lat})}function i(e){console.log("定位失败  ".concat(Date.now()," ").concat(e)),t(e)}AMap.event.addListener(r,"complete",a),AMap.event.addListener(r,"error",i)})})}function s(e){var t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);var r=new Image;return r.src=t.toDataURL("image/jpeg"),r}},Ba7Q:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAA3klEQVRIia3WOwrDMAyA4T/tIbMFupVeIJm7tL1A6QkCPlFOE9pJkAZbkWRrtODDYOvRLctCZUzAA3illKauEhRM4nVqiAGMUTCHAcwRsIgBgxdUsZTS6gEPMQAraMKsoBmzgCoGrPuEBroxDQxhJTCM5cAqbA9WY1uwCSZgM0zAHLYCFy8m4CdzfgbuXkzAWwEdgWcE/LZE5ZWbodt/2ATdV0o1mqvlKrTUbcKo1g9D6FHHdqOWmaKifd//odapZ0Y9c9mERravDngD10wutH2pN41uXyU0tH2V0BkYfihlchvr/DBGAAAAAElFTkSuQmCC"},C6GC:function(e,t,r){},Eoag:function(e,t,r){},G5V7:function(e,t,r){},HWu3:function(e,t,r){"use strict";var n=r("Eoag"),o=r.n(n);o.a},J9k6:function(e,t,r){"use strict";r.d(t,"c",function(){return i}),r.d(t,"d",function(){return s}),r.d(t,"a",function(){return u}),r.d(t,"e",function(){return c}),r.d(t,"f",function(){return l}),r.d(t,"g",function(){return f}),r.d(t,"b",function(){return m});r("91GP");var n=r("dRp0"),o=r("Qyje"),a=r.n(o);function i(e){return n["b"].get("group",{params:{id:e}}).then(n["a"])}function s(){return n["b"].get("group/list").then(n["a"])}function u(e){return n["b"].post("group/add",a.a.stringify({name:e})).then(n["a"])}function c(e){return n["b"].post("group/join",a.a.stringify({id:e})).then(n["a"])}function l(e){return n["b"].post("group/quit",a.a.stringify({id:e})).then(n["a"])}function f(e,t){return n["b"].post("group/update",a.a.stringify(Object.assign({id:e},t))).then(n["a"])}function m(e){return n["b"].post("group/delete",a.a.stringify({id:e})).then(n["a"])}},NJ9t:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{attrs:{id:"RfContainer"}},[r("el-form",{ref:"ruleForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{"status-icon":"",model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkpassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.checkpassword,callback:function(t){e.$set(e.ruleForm,"checkpassword",t)},expression:"ruleForm.checkpassword"}})],1),r("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[r("br"),r("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:e.ruleForm.userType,callback:function(t){e.$set(e.ruleForm,"userType",t)},expression:"ruleForm.userType"}},[r("el-option",{attrs:{label:"签到端用户",value:0}}),r("el-option",{attrs:{label:"管理端用户",value:1}})],1)],1),r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"本人照片",prop:"profile"}},[r("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","on-change":e.getFile,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-exceed":e.handleExceed,limit:1,"auto-upload":!1}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),r("em",[e._v("点击上传")])])])],1),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("注册")])],1)],1)],1)},o=[],a=(r("f3/d"),r("RW0V"),r("rGqo"),r("ssfR")),i=(r("7Qib"),{name:"RegisterForm",created:function(){/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?this.pcOrPhone=!1:this.pcOrPhone=!0},mounted:function(){},data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("账号不能为空"));setTimeout(function(){r()},100)},r=function(t,r,n){""===r?n(new Error("请输入密码")):(""!==e.ruleForm.checkpassword&&e.$refs.ruleForm.validateField("checkpassword"),n())},n=function(t,r,n){""===r?n(new Error("请再次输入密码")):r!==e.ruleForm.password?n(new Error("两次输入密码不一致!")):n()},o=function(e,t,r){if(!t)return r(new Error("请上传正脸照片"));setTimeout(function(){r()},100)},a=function(e,t,r){if(!t)return r(new Error("请拍照"));setTimeout(function(){r()},100)};return{ruleForm:{username:"",password:"",checkpassword:"",name:"",userType:null,profile:!1,pcOrPhone:!0,photo_PC:null},rules:{username:[{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}],checkpassword:[{required:!0,validator:n,trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],userType:[{required:!0,message:"请选择用户类型",trigger:"blur"}],profile:[{required:!0,validator:o,trigger:"blur"}],photo_PC:[{required:!0,validator:a,trigger:"blur"}]}}},computed:{ruleFormData:function(){var e=this,t=new FormData;return console.log(this.ruleForm),Object.keys(this.ruleForm).forEach(function(r){"checkpassword"!==r&&t.append(r,e.ruleForm[r])}),console.log(t),t}},methods:{getFile:function(e,t){console.log(e),this.ruleForm.profile=e.raw},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Object(a["d"])(t.ruleFormData).then(function(){t.$message({message:"注册成功  正在跳转",type:"success"}),setTimeout(function(){t.$router.push("/login")},2e3)},function(e){t.$message.error("出错：".concat(e.message))})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){console.log(e,t),this.fileList=[]},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))}}}),s=i,u=(r("nrZA"),r("HWu3"),r("KHd+")),c=Object(u["a"])(s,n,o,!1,null,"3e884e7b",null);t["a"]=c.exports},OU7G:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={user:"user",management:"management"}},Pp3p:function(e,t,r){},RPjt:function(e,t,r){"use strict";var n=r("G5V7"),o=r.n(n);o.a},WL6l:function(e,t,r){"use strict";var n=r("hfnv"),o=r.n(n);o.a},YbHW:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"账号",prop:"username"}},[r("el-input",{attrs:{type:"text"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:e.submitting},on:{click:e.submit}},[r("i",{class:[e.submitting?"el-icon-loading":""]}),e._v(e._s(e.submitting?"":"登录")+"\n        ")])],1)],1)},o=[],a=(r("rGqo"),r("RW0V"),r("dRSK"),r("ssfR")),i=r("OU7G"),s={name:"LoginForm",props:{type:{type:String,required:!0,validator:function(e){return Object.keys(i["a"]).find(function(t){return i["a"][t]===e})}},redirect:{type:String}},data:function(){return{form:{username:"user"==this.type?"username":"quyans",password:(this.type,123)},rules:{username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]},submitting:!1}},methods:{submit:function(){var e=this;this.submitting=!0,Object(a["b"])(this.form.username,this.form.password).then(function(){e.$message({message:"登陆成功  正在跳转",type:"success"}),setTimeout(function(){e.redirect?window.location.href=e.redirect:window.location.href="/".concat(e.type,".html")},2e3)},function(t){e.$message.error("出错：".concat(t.message))}).then(function(){e.submitting=!1},function(){e.submitting=!1})}}},u=s,c=(r("utKO"),r("KHd+")),l=Object(c["a"])(u,n,o,!1,null,"7655b6cf",null);t["a"]=l.exports},dRp0:function(e,t,r){"use strict";r.d(t,"b",function(){return f}),r.d(t,"a",function(){return d});var n=r("xmWZ"),o=r("3Aqn"),a=r("0yhX"),i=r("EdlT"),s=r("4A8Y"),u=r("vDqi"),c=r.n(u),l="/api/v1",f=c.a.create({baseURL:l});f.interceptors.request.use(function(e){return e.params=e.params||{},e.params.t=Date.now(),e});var m=function(e){function t(e,r){var o;return Object(n["a"])(this,t),o=Object(a["a"])(this,Object(i["a"])(t).call(this)),o.message=e,o.status=r,o}return Object(o["a"])(t,e),t}(Object(s["a"])(Error)),d=function(e){var t=e.data;if(t.message instanceof Array&&(t.message=t.message[0]),200===t.status)return t.data;throw new m(e.data.message,e.data.status)}},hfnv:function(e,t,r){},nrZA:function(e,t,r){"use strict";var n=r("Pp3p"),o=r.n(n);o.a},ssfR:function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return c}),r.d(t,"a",function(){return l});var n=r("dRp0"),o=r("Qyje"),a=r.n(o),i="hasLoggedIn";function s(e,t){return n["b"].post("login",a.a.stringify({username:e,password:t})).then(n["a"]).then(function(e){return sessionStorage.setItem(i,"true")})}function u(){return n["b"].post("logout").then(n["a"]).then(function(e){return sessionStorage.removeItem(i)})}function c(e){return n["b"].post("register",e).then(n["a"])}function l(){return"true"===sessionStorage.getItem(i)}n["b"].get("hasLoggedIn").then(n["a"]).then(function(e){return sessionStorage.setItem(i,e?"true":"false")})},tvBP:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return a});var n=r("dRp0");function o(){return n["b"].get("user").then(n["a"])}function a(e){return n["b"].post("user",e).then(n["a"])}},utKO:function(e,t,r){"use strict";var n=r("C6GC"),o=r.n(n);o.a},za7x:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("img",{attrs:{src:e.src}})},o=[],a={name:"Icon",props:{src:{type:String,required:!0}}},i=a,s=(r("RPjt"),r("KHd+")),u=Object(s["a"])(i,n,o,!1,null,"72f3cb9a",null);t["a"]=u.exports},zbG2:function(e,t,r){"use strict";r.d(t,"d",function(){return i}),r.d(t,"a",function(){return s}),r.d(t,"c",function(){return u}),r.d(t,"b",function(){return c});var n=r("dRp0"),o=r("Qyje"),a=r.n(o);function i(){return n["b"].get("check/status").then(n["a"])}function s(e,t){return t.append("id",e),n["b"].post("check/check",t).then(n["a"])}function u(e){return n["b"].post("check/enable",a.a.stringify({id:e})).then(n["a"])}function c(e){return n["b"].post("check/disable",a.a.stringify({id:e})).then(n["a"])}}}]);
//# sourceMappingURL=chunk-common.ddd4b75c.js.map