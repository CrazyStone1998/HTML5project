(function(e){function t(t){for(var a,r,l=t[0],s=t[1],c=t[2],d=0,m=[];d<l.length;d++)r=l[d],o[r]&&m.push(o[r][0]),o[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,l=1;l<n.length;l++){var s=n[l];0!==o[s]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={4:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;i.push([28,0,1]),n()})({"+CZ1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticStyle:{margin:"auto"}},[n("h2",{staticStyle:{"font-weight":"initial"}},[e._v("管理者注册")]),n("register-form"),n("p",{staticStyle:{"text-align":"right"}},[n("a",{attrs:{href:e.BASE_URL+"user.html/#/register"}},[e._v("切换至用户端注册")])])],1)},o=[],i=n("NJ9t"),r={name:"Register",components:{RegisterForm:i["a"]},data:function(){return{BASE_URL:"/"}}},l=r,s=(n("vMQI"),n("KHd+")),c=Object(s["a"])(l,a,o,!1,null,"72234f90",null);t["default"]=c.exports},"/56W":function(e,t,n){"use strict";n.r(t);n("yt8O"),n("VRzm");var a=n("Kw5r"),o=n("RYf7"),i=n("jE9Z"),r=n("7Qib"),l=n("ssfR"),s=n("uXSg"),c=function(e){return s("./".concat(Object(r["c"])(e),"/").concat(Object(r["d"])(e),".vue")).default};a["default"].use(i["a"]);var u=new i["a"]({routes:[{path:"/",name:"home",component:c("home")},{path:"/group/:id",name:"group",component:c("group")}]});u.beforeEach(function(e,t,n){Object(l["a"])()?n():window.location.href="/index.html"});var d=n("XJYT"),m=n.n(d);n("D66Q"),n("y2Aq");a["default"].config.productionTip=!1,a["default"].use(m.a),new a["default"]({router:u,render:function(e){return e(o["default"])}}).$mount("#app")},"/wHh":function(e,t,n){},"/zmX":function(e,t,n){},28:function(e,t,n){e.exports=n("/56W")},"5mI2":function(e,t,n){"use strict";var a=n("iNkM"),o=n.n(a);o.a},"6GTM":function(e,t,n){},"6ihd":function(e,t,n){"use strict";var a=n("K/mb"),o=n.n(a);o.a},"8Nya":function(e,t,n){},"A+n8":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},DJkZ:function(e,t){这里放相应view的私有component},DMB7:function(e,t,n){"use strict";var a=n("/wHh"),o=n.n(a);o.a},JWkG:function(e,t,n){"use strict";var a=n("pBuk"),o=n.n(a);o.a},"K/mb":function(e,t,n){},LZuH:function(e,t,n){"use strict";var a=n("YaoV"),o=n.n(a);o.a},OSxE:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"},style:e.note,attrs:{id:"test"}},[n("div",{staticStyle:{height:"100%","background-color":"rgba(0,0,0,0.47)",color:"white"}},[n("div",{staticStyle:{width:"80%",margin:"0 auto","padding-top":"25%"}},[e._m(0),n("el-card",{staticStyle:{margin:"0 auto",color:"white"}},[n("login-form",{attrs:{type:"management"}}),n("p",{staticStyle:{float:"left"}},[n("a",{attrs:{href:e.BASE_URL+"index.html/#/login"}},[e._v("新用户注册")])]),n("p",{staticStyle:{float:"right"}},[n("a",{attrs:{href:e.BASE_URL+"user.html/#/login"}},[e._v("切换至用户端页面")])])],1)],1)])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",{staticStyle:{margin:"0","margin-bottom":"20%"}},[e._v("亲爱的管理者，"),n("br"),n("h1",{staticStyle:{margin:"0"}},[e._v("welcome!")])])}],i=n("YbHW"),r={name:"Login",components:{LoginForm:i["a"]},data:function(){return{note:{backgroundImage:"url("+n("4LYi")+")",backgroundRepeat:"no-repeat",height:"100%",backgroundSize:"100% 100%"},BASE_URL:"/"}}},l=r,s=(n("lkFN"),n("DMB7"),n("KHd+")),c=Object(s["a"])(l,a,o,!1,null,"ff981bd6",null);t["default"]=c.exports},RYf7:function(e,t,n){"use strict";var a=n("A+n8"),o=n("c8eX"),i=(n("SoJG"),n("KHd+")),r=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},SoJG:function(e,t,n){"use strict";var a=n("8Nya"),o=n.n(a);o.a},Xme6:function(e,t,n){},YaoV:function(e,t,n){},c8eX:function(e,t,n){"use strict";var a=n("cG0e"),o=n.n(a);t["default"]=o.a},cG0e:function(e,t){},cPXk:function(e,t,n){},fPAr:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{style:"background-color: #909399"},[n("h4",[e._v(e._s(e.groupName))])])},o=[],i={name:"SingleGroupItem",props:{groupId:{type:String,required:!0},groupName:{type:String,required:!0}},data:function(){}},r=i,l=(n("vSbO"),n("KHd+")),s=Object(l["a"])(r,a,o,!1,null,"4bbc3dce",null);t["default"]=s.exports},iNkM:function(e,t,n){},"jw/Y":function(e,t,n){},lFeD:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.myGroupList,stripe:""}},[n("el-table-column",{attrs:{prop:"id",label:"群口令"}}),n("el-table-column",{attrs:{prop:"name",label:"群体名称"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){n.preventDefault(),e.JumpToGroup(t.$index)}}},[e._v("\n                        进入群体\n                    ")])]}}])})],1)},o=[],i=n("J9k6"),r={name:"MyGroupTable",created:function(){this.update()},data:function(){return{tableData:[],activeNames:["1"],myGroupList:[],dialogFormVisible:!1,formLabelWidth:"100px"}},methods:{update:function(){var e=this;Object(i["d"])().then(function(t){e.myGroupList=t})},handleChange:function(e){},JumpToGroup:function(e){var t=this.myGroupList[e].id;this.$router.push("group/"+t)}}},l=r,s=(n("6ihd"),n("KHd+")),c=Object(s["a"])(l,a,o,!1,null,"46d50c26",null);t["default"]=c.exports},lkFN:function(e,t,n){"use strict";var a=n("6GTM"),o=n.n(a);o.a},mWCa:function(e,t,n){e.exports=n.p+"img/head3.d6783fb6.png"},o1ed:function(e,t,n){"use strict";var a=n("jw/Y"),o=n.n(a);o.a},pBuk:function(e,t,n){},qlX1:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%"}},[n("el-container",{attrs:{id:"GroupContainer"}},[n("el-header",{style:e.note},[n("AppBar",[[e._v(e._s(this.name)+"\n                ")]],2)],1),n("el-main",[n("el-tabs",{on:{"tab-click":e.handleListClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"群体成员",name:"first"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.members,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),n("el-table-column",{attrs:{label:"签到情况"}},[n("el-table-column",{attrs:{prop:"allRecord",label:"本群次数"}}),n("el-table-column",{attrs:{prop:"misRecord",label:"未签次数"}})],1),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.stu_message(t.$index)}}},[e._v("查看")])]}}])})],1),n("el-dialog",{staticClass:"recordDiv",staticStyle:{"margin-top":"0"},attrs:{id:"detailRecord",title:"详细签到情况",visible:e.perRecordDiv},on:{"update:visible":function(t){e.perRecordDiv=t}}},[n("el-table",{attrs:{data:e.perRecordData,height:350,"row-class-name":e.perRecordState}},[n("el-table-column",{attrs:{property:"day",label:"日期"}}),n("el-table-column",{attrs:{property:"time",label:"开始时间"}}),n("el-table-column",{attrs:{property:"checked",fixed:"right",width:"50",label:"情况"}})],1)],1)],1),n("el-tab-pane",{attrs:{label:"计划列表",name:"second"}},[n("el-table",{staticStyle:{width:"100%","margin-bottom":"40px"},attrs:{"row-class-name":e.tableRowClassName,data:e.mySchList,border:""}},[n("el-table-column",{attrs:{prop:"startUpTime",label:"起始时间"}}),n("el-table-column",{attrs:{prop:"duration",label:"持续时间"}}),n("el-table-column",{attrs:{prop:"repeat",label:"重复"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.deleteScheduleClick(t.$index)}}},[e._v("删除")]),n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){n.preventDefault(),e.change_Schedule(t.$index)}}},[e._v("编辑")])]}}])})],1)],1),n("el-tab-pane",{attrs:{label:"历史计划",name:"third"}},[n("el-table",{staticStyle:{width:"100%","margin-bottom":"40px"},attrs:{data:e.historyScheduleList,border:""}},[n("el-table-column",{attrs:{prop:"day",label:"日期"}}),n("el-table-column",{attrs:{prop:"time",label:"时间"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.recordMess(t.$index)}}},[e._v("查看")])]}}])})],1),n("el-dialog",{staticClass:"recordDiv",attrs:{title:"详细签到情况",visible:e.RecordDiv},on:{"update:visible":function(t){e.RecordDiv=t}}},[n("el-collapse",{model:{value:e.Record_activeName,callback:function(t){e.Record_activeName=t},expression:"Record_activeName"}},[n("el-collapse-item",{attrs:{title:"完成签到人员",name:"1"}},[n("el-table",{attrs:{data:e.RecordData.done,"row-class-name":e.recordBack_done}},[n("el-table-column",{attrs:{property:"username",label:"用户名"}}),n("el-table-column",{attrs:{property:"name",label:"姓名"}})],1)],1),n("el-collapse-item",{attrs:{title:"未完成签到人员",name:"2"}},[n("el-table",{attrs:{data:e.RecordData.missed,"row-class-name":e.recordBack_missed}},[n("el-table-column",{attrs:{property:"username",label:"用户名"}}),n("el-table-column",{attrs:{property:"name",label:"姓名"}})],1)],1)],1)],1)],1)],1),n("el-dialog",{attrs:{title:"设置签到计划",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{attrs:{model:e.schedule_form}},[n("el-form-item",{attrs:{label:"开启时间","label-width":e.formLabelWidth}},[n("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",format:"HH:mm","value-format":"HH:mm",placeholder:"选择时间"},model:{value:e.schedule_form.startUpTime,callback:function(t){e.$set(e.schedule_form,"startUpTime",t)},expression:"schedule_form.startUpTime"}})],1),n("el-form-item",{attrs:{label:"持续时间","label-width":e.formLabelWidth}},[n("el-col",{attrs:{span:8}},[n("el-input",{model:{value:e.schedule_form.duration,callback:function(t){e.$set(e.schedule_form,"duration",t)},expression:"schedule_form.duration"}})],1),n("el-col",{attrs:{span:2}},[e._v("\n                            分\n                        ")])],1),n("el-form-item",{attrs:{label:"重复","label-width":e.formLabelWidth}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.rep,callback:function(t){e.rep=t},expression:"rep"}},[e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),e._v("\n                            "+e._s(e.rep)+"\n                        ")],2)],1),n("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.schedule_form.enable,callback:function(t){e.$set(e.schedule_form,"enable",t)},expression:"schedule_form.enable"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit_schedule}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"修改签到计划",visible:e.dialogChangeFormVisible},on:{"update:visible":function(t){e.dialogChangeFormVisible=t}}},[n("el-form",{attrs:{model:e.schedule_change_form}},[n("el-form-item",{attrs:{label:"开启时间","label-width":e.formLabelWidth}},[n("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",format:"HH:mm","value-format":"HH:mm",placeholder:"选择时间"},model:{value:e.schedule_change_form.startUpTime,callback:function(t){e.$set(e.schedule_change_form,"startUpTime",t)},expression:"schedule_change_form.startUpTime"}})],1),n("el-form-item",{attrs:{label:"持续时间","label-width":e.formLabelWidth}},[n("el-col",{attrs:{span:8}},[n("el-input",{model:{value:e.schedule_change_form.duration,callback:function(t){e.$set(e.schedule_change_form,"duration",t)},expression:"schedule_change_form.duration"}})],1),n("el-col",{attrs:{span:2}},[e._v("\n                            分\n                        ")])],1),n("el-form-item",{attrs:{label:"重复","label-width":e.formLabelWidth}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.change_arr_repeat,callback:function(t){e.change_arr_repeat=t},expression:"change_arr_repeat"}},[e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),e._v("\n                            "+e._s(e.change_arr_repeat)+"\n                        ")],2)],1),n("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.schedule_change_form.enable,callback:function(t){e.$set(e.schedule_change_form,"enable",t)},expression:"schedule_change_form.enable"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogChangeFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit_Changeschedule}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"编辑群体",visible:e.dialogEditGroup},on:{"update:visible":function(t){e.dialogEditGroup=t}}},[n("el-form",{attrs:{model:e.group_Editform}},[n("el-form-item",{attrs:{label:"群体名称","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.group_Editform.name,callback:function(t){e.$set(e.group_Editform,"name",t)},expression:"group_Editform.name"}})],1),n("el-form-item",{attrs:{label:"人脸识别","label-width":e.formLabelWidth}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"开启","inactive-text":"关闭"},model:{value:e.group_Editform.needFace,callback:function(t){e.$set(e.group_Editform,"needFace",t)},expression:"group_Editform.needFace"}})],1),n("el-form-item",{attrs:{label:"地理位置","label-width":e.formLabelWidth}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"开启","inactive-text":"关闭"},model:{value:e.group_Editform.needLocation,callback:function(t){e.$set(e.group_Editform,"needLocation",t)},expression:"group_Editform.needLocation"}})],1),n("SetPosition",{class:[this.group_Editform.needLocation?"Show":"NotShow"],attrs:{"lat-prop":e.son_prop.lat,"lng-prop":e.son_prop.lng},on:{listenToChildLocationEvent:e.changeLoca}}),n("el-form-item",{class:[this.group_Editform.needLocation?"Show":"NotShow"],attrs:{label:"有效距离","label-width":e.formLabelWidth}},[n("el-col",{attrs:{span:12}},[n("el-input",{model:{value:e.group_Editform.effectiveDistance,callback:function(t){e.$set(e.group_Editform,"effectiveDistance",t)},expression:"group_Editform.effectiveDistance"}})],1),e._v("\n                        米\n                    ")],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{type:"danger"},on:{click:e.deleGroup_open}},[e._v("\n                        删除群体\n                    ")]),n("el-button",{on:{click:function(t){e.dialogEditGroup=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit_EditGroup}},[e._v("确 定")])],1)],1)],1)],1),n("div",{staticClass:"footer"},[n("el-button-group",[n("el-button",{attrs:{type:e.state?"danger":"primary"},on:{click:e.imme_sign}},[e._v("\n                "+e._s(e.state?"结束签到":"开始签到")+"\n            ")]),n("el-button",{on:{click:e.plan_sign}},[e._v("添加计划")]),n("el-button",{on:{click:e.editGroup}},[e._v("编辑群体")])],1)],1)],1)},o=[],i=(n("KKXr"),n("FLlr"),n("f3/d"),n("3TiO")),r=n("J9k6"),l=n("zbG2"),s=(n("91GP"),n("dRp0")),c=n("Qyje"),u=n.n(c);function d(e){return s["b"].get("schedule",{params:{id:e}}).then(s["a"])}function m(e,t){return s["b"].post("schedule/add",u.a.stringify(Object.assign({id:e},t))).then(s["a"])}function f(e,t){return s["b"].post("schedule/update",u.a.stringify(Object.assign({scheduleId:e},t))).then(s["a"])}function h(e){return s["b"].post("schedule/delete",u.a.stringify({scheduleId:e})).then(s["a"])}var p=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},g=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("div",{staticStyle:{height:"250px"},attrs:{id:"container"}}),n("div",{staticStyle:{height:"100px"},attrs:{id:"tip"}})])}],b={name:"SetPosition",props:["lngProp","latProp"],data:function(){return{jing:null,wei:null,intervalindex:null,marker:null,map:null,counter:0,change_jw_counter:0,lngCenter:null,latCenter:null,zoom:null}},created:function(){null==this.latProp||null==this.lngProp?(this.lngCenter=117.138302,this.latCenter=36.666758,this.zoom=15):(this.lngCenter=this.lngProp,this.latCenter=this.latProp,this.zoom=15)},mounted:function(){this.update()},watch:{},methods:{update:function(){var e,t=this;t.marker,t.map=new AMap.Map("container",{resizeEnable:!0,center:[t.lngCenter,t.latCenter],zoom:t.zoom});t.map.on("click",function(e){t.jing=e.lnglat.getLng(),t.wei=e.lnglat.getLat(),t.clearmarker(),t.addMarker(),t.sendLocationParent()});t.map.plugin("AMap.Geolocation",function(){e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB",GeoLocationFirst:!0}),t.map.addControl(e),null==t.lngProp&&null==t.latProp?e.getCurrentPosition():void 0==t.lngProp&&void 0==t.latProp?console.log("没收到prop"):(t.jing=t.lngProp,t.wei=t.latProp,t.clearmarker(),t.addMarker(),t.sendLocationParent()),console.log("已经开始加载地图了"),AMap.event.addListener(e,"complete",t.onComplete),AMap.event.addListener(e,"error",t.onError)})},onComplete:function(e){var t=["定位成功"];t.push("经度："+e.position.getLng()),t.push("纬度："+e.position.getLat()),this.jing=e.position.getLng(),this.wei=e.position.getLat(),this.clearmarker(),this.addMarker(),this.sendLocationParent(),e.accuracy&&t.push("精度："+e.accuracy+" 米"),t.push("是否经过偏移："+(e.isConverted?"是":"否")),document.getElementById("tip").innerHTML=t.join("<br>")},onError:function(e){console.log(JSON.stringify(e)),document.getElementById("tip").innerHTML="定位失败"},addMarker:function(){this.marker=new AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:[this.jing,this.wei]}),this.marker.setMap(this.map)},clearmarker:function(){this.marker&&(this.marker.setMap(null),this.marker=null)},sendLocationParent:function(){this.$emit("listenToChildLocationEvent",this.jing,this.wei)}}},v=b,_=(n("wFDq"),n("KHd+")),y=Object(_["a"])(v,p,g,!1,null,"1a118e48",null),w=y.exports;function k(e,t){return s["b"].get("group/"+e+"/user/"+t).then(s["a"])}function x(e){return s["b"].get("history/"+e).then(s["a"])}function S(e){return s["b"].get("record/"+e).then(s["a"])}var E={name:"Group",components:{AppBar:i["a"],SetPosition:w},data:function(){return{name:"",owner:"",state:!0,members:[],id:null,dialogFormVisible:!1,formLabelWidth:"100px",dialogChangeFormVisible:!1,dialogEditGroup:!1,options:[{value:"1",label:"周一"},{value:"2",label:"周二"},{value:"3",label:"周三"},{value:"4",label:"周四"},{value:"5",label:"周五"},{value:"6",label:"周六"},{value:"7",label:"周七"}],rep:[],schedule_form:{startUpTime:"",duration:"",repeat:"",enable:!0},schedule_change_form:{startUpTime:"",duration:null,repeat:"",enable:!0},schedule_final:{startUpTime:"",duration:null,repeat:"",enable:!1},changeSchedule_final:{startUpTime:"",duration:null,repeat:"",enable:!1},activeName:"second",Record_activeName:1,mySchList:[{scheduleId:"0dsfwefsd",startUpTime:"03:15",duration:30,enable:!0,repeat:"1,3,5"},{scheduleId:"adfafd",startUpTime:"04:15",duration:20,enable:!0,repeat:"1,3,5"}],group_Editform:{name:"操作系统",needLocation:!1,needFace:!1,lng:null,lat:null,effectiveDistance:200},change_arr_repeat:[],son_prop:{lat:null,lng:null},perRecordDiv:!1,perRecordData:[],historyScheduleList:[],RecordDiv:!1,RecordData:{id:null,startUpDateTime:null,duration:null,done:[],missed:[]},note:{backgroundImage:"url("+n("mWCa")+")",backgroundRepeat:"no-repeat",height:"60px",width:"100%",backgroundSize:"100% 100%",position:"relative"}}},created:function(){this.id=this.$route.params.id,console.log(this.id),this.update()},watch:{$route:function(e,t){this.id=this.$route.params.id,this.update()}},methods:{update:function(){var e=this;Object(r["c"])(this.id).then(function(t){var n=e;if(t){e.name=t.name,e.owner=t.owner,e.state=t.state,x(e.id).then(function(t){for(var n=t,a=0;a<n.length;a++)n[a].day=n[a].startUpDateTime.slice(0,10),n[a].time=n[a].startUpDateTime.slice(11,16),1==n[a].checked?n[a].checked="签到":n[a].checked="未签";e.historyScheduleList=n});for(var a=t.members,o=0;o<a.length;o++){console.log(o+" 这是一开始");var i=0,r=0,l=0;k(n.id,a[o].username).then(function(e){for(var t=0;t<e.length;t++)i++,0==e[t].checked&&r++;a[l].allRecord=i,a[l].misRecord=r,l++,n.members=a})}e.group_Editform.name=t.name,e.group_Editform.needLocation=t.needLocation,e.group_Editform.needFace=t.needFace,t.needLocation?(e.group_Editform.lng=t.location.lng,e.group_Editform.lat=t.location.lat,e.son_prop.lng=t.location.lng,e.son_prop.lat=t.location.lat,e.group_Editform.effectiveDistance=t.location.effectiveDistance):(e.son_prop.lng=null,e.son_prop.lat=null,e.group_Editform.effectiveDistance=null),console.log("正在更新群组信息"+e.state),d(e.id).then(function(t){console.log("成功获取"),e.mySchList=t})}else e.$alert("该群组不存在！","服务器消息",{confirmButtonText:"确定"}).then(function(){e.$router.go(-1)})})},plan_sign:function(){this.dialogFormVisible=!0},imme_sign:function(){var e=this;!0===this.state?Object(l["b"])(this.id).then(function(){e.$message({message:"已关闭签到",center:!0,type:"warning"}),e.update()}):Object(l["c"])(this.id).then(function(){e.$message({message:"开启签到成功",type:"success",center:!0}),e.update()})},deleGroup_open:function(){var e=this;this.$confirm("此操作将永久删除"+this.name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("删除"),Object(r["b"])(e.id).then(function(){e.$message({message:"删除成功，正在跳转到主页面",type:"success",center:!0}),setTimeout(function(){e.$router.go(-1)},2e3)},function(){console.log(e.id)})}).catch(function(){e.$message({type:"info",message:"已取消删除",center:!0})})},submit_schedule:function(){var e=this;if(this.schedule_final.duration=this.schedule_form.duration,console.log("持续时间为"+this.schedule_final.duration),this.schedule_final.enable=this.schedule_form.enable,this.schedule_final.repeat="",0!=this.rep.length){this.schedule_final.repeat=this.rep[0];for(var t=1;t<this.rep.length;t++)this.schedule_final.repeat=this.schedule_final.repeat+","+this.rep[t]}this.schedule_final.startUpTime=this.schedule_form.startUpTime,m(this.id,this.schedule_final).then(function(){e.$message({message:"创建计划成功",type:"success",center:!0})}),this.dialogFormVisible=!1,this.update()},change_Schedule:function(e){this.dialogChangeFormVisible=!0,this.schedule_change_form=this.mySchList[e];var t=this.schedule_change_form.repeat;this.change_arr_repeat=t.split(",")},submit_Changeschedule:function(){var e=this,t=this.schedule_change_form.scheduleId;if(this.changeSchedule_final.startUpTime=this.schedule_change_form.startUpTime,this.changeSchedule_final.duration=this.schedule_change_form.duration,this.changeSchedule_final.enable=this.schedule_change_form.enable,this.changeSchedule_final.repeat="",0!=this.change_arr_repeat.length){this.changeSchedule_final.repeat=this.change_arr_repeat[0];for(var n=1;n<this.change_arr_repeat.length;n++)this.changeSchedule_final.repeat=this.changeSchedule_final.repeat+","+this.change_arr_repeat[n]}f(t,this.changeSchedule_final).then(function(){e.$message({message:"修改成功",type:"success",center:!0}),e.update(),e.dialogChangeFormVisible=!1})},handleListClick:function(e,t){console.log(e,t)},deleteScheduleClick:function(e){var t=this;this.$confirm("此操作将永久删除该计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){h(t.mySchList[e].scheduleId).then(function(){t.$message({type:"success",message:"成功删除计划",center:!0}),t.update()})}).catch(function(){t.$message({type:"info",message:"已取消删除",center:!0})})},editGroup:function(){this.dialogEditGroup=!0},submit_EditGroup:function(){var e=this;Object(r["g"])(this.id,this.group_Editform).then(function(){e.$message({message:"成功修改",type:"success",center:!0}),e.dialogEditGroup=!1,e.update()})},tableRowClassName:function(e){e.row;var t=e.rowIndex;return!1===this.mySchList[t].enable?"warning_row":(this.mySchList[t].enable,"success_row")},recordBack_done:function(e){e.row,e.rowIndex;return"success_row"},recordBack_missed:function(e){e.row,e.rowIndex;return"warning_row"},perRecordState:function(e){e.row;var t=e.rowIndex;return"未签"===this.perRecordData[t].checked?"warning_row":"已签"===this.perRecordData[t].checked?"success_row":void 0},changeLoca:function(e,t){this.group_Editform.lng=e,this.group_Editform.lat=t,console.log("来自父组件打印"+this.group_Editform.lng+","+this.group_Editform.lat)},stu_message:function(e){var t=this;this.perRecordDiv=!0;var n=this.members[e].username;k(this.id,n).then(function(e){console.log(e);for(var n=e,a=0;a<n.length;a++)n[a].day=n[a].startUpDateTime.slice(0,10),n[a].time=n[a].startUpDateTime.slice(11,16),1==n[a].checked?n[a].checked="签到":n[a].checked="未签";t.perRecordData=n})},recordMess:function(e){var t=this;this.RecordDiv=!0,console.log(e);var n=this.historyScheduleList[e].id;console.log(n),S(n).then(function(e){t.RecordData.done=e.missed,t.RecordData.missed=e.done})}}},L=E,$=(n("LZuH"),n("JWkG"),Object(_["a"])(L,a,o,!1,null,"8bb58844",null));t["default"]=$.exports},"sZ/I":function(e,t,n){},tPLj:function(e,t,n){"use strict";var a=n("cPXk"),o=n.n(a);o.a},uXSg:function(e,t,n){var a={"./group/Group":"qlX1","./group/Group.vue":"qlX1","./home/Home":"wgb7","./home/Home.vue":"wgb7","./home/component/MyGroupTable":"lFeD","./home/component/MyGroupTable.vue":"lFeD","./home/component/SingleGroupItem":"fPAr","./home/component/SingleGroupItem.vue":"fPAr","./login/Login":"OSxE","./login/Login.vue":"OSxE","./login/components/README.md":"DJkZ","./register/Register":"+CZ1","./register/Register.vue":"+CZ1"};function o(e){var t=i(e);return n(t)}function i(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id="uXSg"},vMQI:function(e,t,n){"use strict";var a=n("Xme6"),o=n.n(a);o.a},vSbO:function(e,t,n){"use strict";var a=n("sZ/I"),o=n.n(a);o.a},wFDq:function(e,t,n){"use strict";var a=n("/zmX"),o=n.n(a);o.a},wgb7:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Header"),n("MyGroupTable",{ref:"table"}),n("div",{staticClass:"footer"},[n("el-button",{on:{click:e.ChuangJianGroup}},[n("span",{staticClass:"letter_footer"},[e._v("创")]),n("span",{staticClass:"letter_footer"},[e._v("建")]),n("span",{staticClass:"letter_footer"},[e._v("群")]),n("span",{staticClass:"letter_footer"},[e._v("体")])])],1)],1)},o=[],i=n("lFeD"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{style:e.note,attrs:{id:"headOut"}},[n("div",{staticStyle:{height:"45px",width:"45px","background-color":"#00ffff00",display:"inline-block",position:"absolute",top:"50%",transform:"translate(0, -50%)","border-radius":"25px","margin-left":"5%"},attrs:{id:"headphoto"},on:{click:function(t){e.showEditPerInfo()}}}),n("div",{staticStyle:{right:"0",height:"60%",position:"absolute",top:"50%",transform:"translate(0, -50%)","margin-right":"5%"},attrs:{id:"headIn"}},[n("el-button",{staticStyle:{color:"white"},attrs:{type:"text"},on:{click:e.logoutFunction}},[e._v("注销账户")])],1)]),n("el-dialog",{attrs:{title:"个人信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"UserInfo",attrs:{model:e.UserInfo}},[n("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[n("el-input",{attrs:{disabled:!0},model:{value:e.UserInfo.username,callback:function(t){e.$set(e.UserInfo,"username",t)},expression:"UserInfo.username"}})],1),n("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.UserInfo.name,callback:function(t){e.$set(e.UserInfo,"name",t)},expression:"UserInfo.name"}})],1),n("el-form-item",{attrs:{label:"人脸识别头像","label-width":e.formLabelWidth}},[n("div",{staticStyle:{width:"120px",height:"120px"},attrs:{id:"perEditHead"}}),n("el-upload",{ref:"profile",staticClass:"upload-demo",attrs:{prop:"profile",action:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-change":e.getFile,multiple:"",limit:1,"on-exceed":e.handleExceed,"auto-upload":!1}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("更换头像")])],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editPerInfo()}}},[e._v("确 定")])],1)],1)],1)},l=[],s=(n("RW0V"),n("rGqo"),n("f3/d"),n("ssfR")),c=n("tvBP"),u={name:"Header",created:function(){this.getPhoto()},data:function(){return{note:{backgroundImage:"url("+n("mWCa")+")",backgroundRepeat:"no-repeat",height:"60px",width:"100%",backgroundSize:"100% 100%",position:"relative"},UserInfo:{username:"",name:"",profile:null},userHeadPhoto:null,submitUserInfo:{name:""},dialogFormVisible:!1,formLabelWidth:"100px"}},computed:{editPerInfoFormData:function(){var e=this;this.submitUserInfo.name=this.UserInfo.name,null!=this.userHeadPhoto&&(this.submitUserInfo.profile=this.userHeadPhoto);var t=new FormData;return console.log(this.submitUserInfo),Object.keys(this.submitUserInfo).forEach(function(n){t.append(n,e.submitUserInfo[n])}),t}},methods:{getFile:function(e,t){this.userHeadPhoto=e.raw},handleRemove:function(e,t){console.log(e,t),this.fileList=[]},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},logoutFunction:function(){var e=this;Object(s["c"])().then(function(){e.$message({message:"账户注销成功  正在跳转",type:"success"}),setTimeout(function(){e.$router.push("/login")},2e3)})},getPhoto:function(){var e=this;Object(c["a"])().then(function(t){document.getElementById("headphoto").style.backgroundImage="url("+t.profile+"?t="+Date.now()+")",document.getElementById("headphoto").style.backgroundSize="45px 45px",e.UserInfo=t})},editPerInfo:function(){var e=this;Object(c["b"])(this.editPerInfoFormData).then(function(){e.dialogFormVisible=!1,e.$message("修改成功"),setTimeout(e.getPhoto(),1e3),e.$refs.profile.clearFiles(),e.userHeadPhoto=null})},showEditPerInfo:function(){this.dialogFormVisible=!0,Object(c["a"])().then(function(e){document.getElementById("perEditHead").style.backgroundImage="url("+e.profile+"?t="+Date.now()+")",document.getElementById("perEditHead").style.backgroundSize="120px 120px"})}}},d=u,m=(n("5mI2"),n("KHd+")),f=Object(m["a"])(d,r,l,!1,null,"5ae00e55",null),h=f.exports,p=n("J9k6"),g={name:"home",components:{MyGroupTable:i["default"],Header:h},computed:{},data:function(){return{BASE_URL:"/",headPhoto:null}},methods:{update:function(){this.$refs.table.update()},ChuangJianGroup:function(){var e=this;this.$prompt("请输入群体名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var n=t.value;console.log(n),Object(p["a"])(n).then(function(){console.log(n),e.$message({type:"success",message:"成功创建群体：: "+n}),e.update()})}).catch(function(){e.$message({type:"info",message:"取消输入"})})}}},b=g,v=(n("o1ed"),n("tPLj"),Object(m["a"])(b,a,o,!1,null,"2ad3df6d",null));t["default"]=v.exports},y2Aq:function(e,t,n){}});
//# sourceMappingURL=management.4f0fe9b9.js.map